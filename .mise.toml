[tools]
python = "3.13"
node = "25"

[env]
_.python.venv = { path = "backend/.venv", create = true }

[tasks.install]
description = "Install all dependencies"
run = """
pip install -e ".[dev]" 
pushd frontend && npm install && popd
"""

[tasks.dev]
description = "Start development servers with Docker"
run = "docker compose up -d"

[tasks.test]
description = "Run all tests"
run = """
pytest tests/ -v 
pushd frontend && npm run test || popd
"""

[tasks."test:backend"]
description = "Run backend tests"
run = "cd backend && pytest -v"

[tasks."test:frontend"]
description = "Run frontend tests"
run = "cd frontend && npm run test"

[tasks.build]
description = "Build the frontend"
run = "cd frontend && npm run build"

[tasks.lint]
description = "Run linters"
run = """
cd backend && ruff check .
cd frontend && npm run build
"""

[tasks.validate]
description = "Validate Docker setup"
run = "./validate-docker.sh"
