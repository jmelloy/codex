/* ============================================
   Codex Notebook Theme
   Inspired by Obsidian Notebook Themes
   ============================================ */

:root {
  /* ========== Color Variables ========== */

  /* Pen Colors - Text colors that mimic writing instruments */
  --pen-black: #1a1a1a;
  --pen-gray: #4a5568;
  --pen-blue: #2563eb;
  --pen-red: #dc2626;
  --pen-green: #16a34a;
  --pen-purple: #9333ea;

  /* Page Background Colors - Notebook paper colors */
  --page-white: #ffffff;
  --page-cream: #fef9f3;
  --page-manila: #f4e8d0;
  --page-blueprint: #1e3a5f;

  /* Grid and Line Colors */
  --grid-color: rgba(0, 0, 0, 0.08);
  --grid-size: 24px;
  --ruled-line-color: rgba(100, 149, 237, 0.2);
  --margin-line-color: rgba(220, 38, 38, 0.3);

  /* Shadow and Border Colors */
  --page-shadow: rgba(0, 0, 0, 0.1);
  --page-border: rgba(0, 0, 0, 0.15);

  /* UI Interaction Opacity Values */
  --hover-opacity: 8%;
  --active-opacity: 12%;
  --subtle-hover-opacity: 5%;
  --selected-opacity: 15%;

  /* Default Theme Colors */
  --notebook-bg: var(--page-cream);
  --notebook-text: var(--pen-black);
  --notebook-accent: #667eea;

  /* ========== UI Semantic Colors ========== */

  /* Primary/Accent Colors */
  --color-primary: #667eea;
  --color-primary-hover: #5a67d8;
  --color-primary-active: #4c51bf;

  /* Text Colors */
  --color-text-primary: #2d3748;
  --color-text-secondary: #4a5568;
  --color-text-tertiary: #718096;
  --color-text-placeholder: #a0aec0;
  --color-text-disabled: #cbd5e0;
  --color-text-inverse: #ffffff;

  /* Background Colors */
  --color-bg-primary: #ffffff;
  --color-bg-secondary: #f7fafc;
  --color-bg-tertiary: #edf2f7;
  --color-bg-hover: #f7fafc;
  --color-bg-active: #edf2f7;
  --color-bg-disabled: #e2e8f0;

  /* Border Colors */
  --color-border-light: #e2e8f0;
  --color-border-medium: #cbd5e0;
  --color-border-dark: #a0aec0;
  --color-border-focus: #667eea;

  /* Semantic Feedback Colors */
  --color-success: #16a34a;
  --color-success-bg: #f0fdf4;
  --color-success-border: #86efac;

  --color-error: #dc2626;
  --color-error-bg: #fef2f2;
  --color-error-border: #fca5a5;

  --color-warning: #d97706;
  --color-warning-bg: #fffbeb;
  --color-warning-border: #fde68a;

  --color-info: #2563eb;
  --color-info-bg: #eff6ff;
  --color-info-border: #93c5fd;

  /* Shadow Tokens */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

  /* ========== Typography System ========== */

  /* Font Families */
  --font-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Helvetica Neue", Arial,
    sans-serif;
  --font-serif: "Georgia", "Palatino", "Times New Roman", serif;
  --font-mono: "Monaco", "Courier New", "Consolas", monospace;

  /* Font Sizes */
  --text-xs: 0.75rem; /* 12px */
  --text-sm: 0.875rem; /* 14px */
  --text-base: 1rem; /* 16px */
  --text-lg: 1.125rem; /* 18px */
  --text-xl: 1.25rem; /* 20px */
  --text-2xl: 1.5rem; /* 24px */
  --text-3xl: 1.875rem; /* 30px */
  --text-4xl: 2.25rem; /* 36px */

  /* Font Weights */
  --font-normal: 400;
  --font-medium: 500;
  --font-semibold: 600;
  --font-bold: 700;

  /* Line Heights */
  --leading-tight: 1.25;
  --leading-snug: 1.375;
  --leading-normal: 1.5;
  --leading-relaxed: 1.625;
  --leading-loose: 1.7;

  /* Letter Spacing */
  --tracking-tight: -0.025em;
  --tracking-normal: 0;
  --tracking-wide: 0.025em;

  /* ========== Spacing Scale ========== */
  --spacing-xs: 0.25rem; /* 4px */
  --spacing-sm: 0.5rem; /* 8px */
  --spacing-md: 0.75rem; /* 12px */
  --spacing-lg: 1rem; /* 16px */
  --spacing-xl: 1.5rem; /* 24px */
  --spacing-2xl: 2rem; /* 32px */
  --spacing-3xl: 3rem; /* 48px */

  /* ========== Border Radius ========== */
  --radius-sm: 0.25rem; /* 4px */
  --radius-md: 0.375rem; /* 6px */
  --radius-lg: 0.5rem; /* 8px */
  --radius-xl: 0.75rem; /* 12px */
  --radius-full: 9999px;
}

/* ========== Paper Texture Background ========== */
.notebook-texture {
  position: relative;
  background-color: var(--notebook-bg);
}

.notebook-texture::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  opacity: 0.03;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' /%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' opacity='0.4'/%3E%3C/svg%3E");
}

/* ========== Ruled Paper Pattern ========== */
.ruled-paper {
  background-color: var(--page-white);
  background-image:
    /* Red margin line */ linear-gradient(
      to right,
      transparent 0,
      transparent 60px,
      var(--margin-line-color) 60px,
      var(--margin-line-color) 61px,
      transparent 61px
    ),
    /* Horizontal ruled lines */
      repeating-linear-gradient(
        to bottom,
        transparent 0,
        transparent calc(var(--grid-size) - 1px),
        var(--ruled-line-color) calc(var(--grid-size) - 1px),
        var(--ruled-line-color) var(--grid-size)
      );
  background-size: 100% var(--grid-size);
  background-position: 0 0;
  line-height: var(--grid-size);
  padding-top: calc(var(--grid-size) / 2);
}

/* ========== Graph Paper Pattern ========== */
.graph-paper {
  background-color: var(--page-white);
  background-image:
    /* Vertical lines */ repeating-linear-gradient(
      to right,
      transparent 0,
      transparent calc(var(--grid-size) - 1px),
      var(--grid-color) calc(var(--grid-size) - 1px),
      var(--grid-color) var(--grid-size)
    ),
    /* Horizontal lines */
      repeating-linear-gradient(
        to bottom,
        transparent 0,
        transparent calc(var(--grid-size) - 1px),
        var(--grid-color) calc(var(--grid-size) - 1px),
        var(--grid-color) var(--grid-size)
      );
  background-size: var(--grid-size) var(--grid-size);
}

/* ========== Dotted Paper Pattern ========== */
.dotted-paper {
  background-color: var(--page-white);
  background-image: radial-gradient(circle, var(--grid-color) 1px, transparent 1px);
  background-size: var(--grid-size) var(--grid-size);
}

/* ========== Page Theme Classes ========== */

/* 
 * Theme classes are now loaded from plugin stylesheets.
 * Each theme plugin provides its own CSS via /api/v1/themes/{id}/stylesheet
 * See backend/plugins/themes/{theme-name}/styles/main.css for theme definitions.
 */

/* ========== Pen Color Classes ========== */
.pen-black {
  color: var(--pen-black) !important;
}
.pen-gray {
  color: var(--pen-gray) !important;
}
.pen-blue {
  color: var(--pen-blue) !important;
}
.pen-red {
  color: var(--pen-red) !important;
}
.pen-green {
  color: var(--pen-green) !important;
}
.pen-purple {
  color: var(--pen-purple) !important;
}

/* ========== Notebook Page Container ========== */
.notebook-page {
  background: var(--notebook-bg);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 4px 12px var(--page-shadow);
  border: 1px solid var(--page-border);
  border-radius: 4px;
  position: relative;
}

/* Spiral binding holes effect (optional) */
.notebook-page.spiral-binding::before {
  content: "";
  position: absolute;
  left: 40px;
  top: 20px;
  bottom: 20px;
  width: 8px;
  background: repeating-linear-gradient(
    to bottom,
    transparent,
    transparent 20px,
    rgba(0, 0, 0, 0.1) 20px,
    rgba(0, 0, 0, 0.1) 28px
  );
  border-radius: 4px;
}

/* ========== Markdown Content Styling ========== */
.notebook-content {
  font-family: "Georgia", "Palatino", "Times New Roman", serif;
  line-height: 1.7;
  color: var(--notebook-text);
}

.notebook-content h1,
.notebook-content h2,
.notebook-content h3,
.notebook-content h4,
.notebook-content h5,
.notebook-content h6 {
  font-family: "Georgia", "Palatino", serif;
  font-weight: 600;
  margin-top: 1.5em;
  margin-bottom: 0.5em;
  color: var(--notebook-text);
  border-bottom: 2px solid color-mix(in srgb, var(--notebook-text) 20%, transparent);
  padding-bottom: 0.3em;
}

.notebook-content a {
  color: var(--pen-blue);
  text-decoration: underline;
  text-decoration-style: dotted;
  text-decoration-thickness: 1px;
  text-underline-offset: 2px;
}

.notebook-content a:hover {
  text-decoration-style: solid;
}

.notebook-content code {
  background: color-mix(in srgb, var(--notebook-text) 8%, transparent);
  padding: 0.2em 0.4em;
  border-radius: 3px;
  font-family: "Courier New", monospace;
  font-size: 0.9em;
}

.notebook-content pre {
  background: color-mix(in srgb, var(--notebook-text) 5%, transparent);
  padding: 1em;
  border-radius: 4px;
  border-left: 3px solid var(--notebook-accent);
  overflow-x: auto;
}

.notebook-content blockquote {
  border-left: 4px solid var(--notebook-accent);
  padding-left: 1em;
  margin-left: 0;
  font-style: italic;
  color: color-mix(in srgb, var(--notebook-text) 80%, transparent);
}

.notebook-content ul,
.notebook-content ol {
  padding-left: 2em;
}

.notebook-content li {
  margin: 0.3em 0;
}

/* Handwriting-style for emphasis (optional enhancement) */
.notebook-content em {
  font-style: italic;
  color: var(--pen-blue);
}

.notebook-content strong {
  font-weight: 700;
  color: var(--pen-black);
}

/* ========== Editor Specific Styles ========== */
.notebook-editor {
  background: transparent;
  color: var(--notebook-text);
  font-family: "Georgia", "Palatino", serif;
  line-height: var(--grid-size);
  padding: 2rem;
}

.notebook-editor::placeholder {
  color: color-mix(in srgb, var(--notebook-text) 40%, transparent);
  font-style: italic;
}

/* ========== Sidebar and UI Elements ========== */
.notebook-sidebar {
  background: color-mix(in srgb, var(--notebook-bg) 95%, var(--notebook-text) 5%);
  border-right: 1px solid var(--page-border);
}

.notebook-toolbar {
  background: var(--notebook-bg);
  border-bottom: 1px solid var(--page-border);
}

/* ========== Responsive Adjustments ========== */
@media (max-width: 768px) {
  :root {
    --grid-size: 20px;
  }

  .ruled-paper,
  .notebook-editor {
    line-height: var(--grid-size);
  }
}

/* ========== Button Styles ========== */
.notebook-button {
  background: var(--notebook-accent);
  color: white;
  font-weight: 500;
  transition: all 0.2s ease;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.notebook-button:hover:not(:disabled) {
  background: color-mix(in srgb, var(--notebook-accent) 85%, black);
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.notebook-button:active:not(:disabled) {
  transform: translateY(0);
}

.notebook-button-secondary {
  background: color-mix(in srgb, var(--notebook-text) 10%, transparent);
  color: var(--notebook-text);
  border: 1px solid var(--page-border);
  font-weight: 500;
  transition: all 0.2s ease;
}

.notebook-button-secondary:hover:not(:disabled) {
  background: color-mix(in srgb, var(--notebook-text) 15%, transparent);
}

/* Dark theme button adjustments */
.theme-blueprint .notebook-button {
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.theme-blueprint .notebook-button:hover:not(:disabled) {
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
}

/* ========== Print Styles ========== */
@media print {
  .notebook-page {
    box-shadow: none;
    border: none;
  }

  .notebook-texture::before {
    opacity: 0.02;
  }
}
