# Integration Metadata
id: opengraph-unfurl
name: Open Graph Link Unfurling
version: 1.0.0
author: Codex Team
description: Rich preview of any URL with Open Graph metadata
license: MIT

# Integration Type
type: integration

# Codex Compatibility
codex_version: ">=1.0.0"
api_version: 1

# Integration Configuration
integration:
  # API type
  api_type: rest

  # Authentication method
  auth_method: none

  # Test endpoint - only one endpoint available
  test_endpoint: fetch_metadata

# Configuration Properties
properties:
  - name: api_key
    type: string
    description: API key for OpenGraph.io
    required: true
    secure: true
    ui:
      type: text
      label: API Key
      placeholder: e79b6105-6ea4-45ff-ab3b-fdab2f1d71c5
      help: Sign up for a free API key at https://www.opengraph.io/

# Block Types
# Custom block renderers for embedding in markdown
blocks:
  - id: link-preview
    name: Link Preview
    description: Rich preview of any URL with Open Graph metadata
    icon: ðŸ”—
    auto_detect: true
    url_patterns:
      - "https?://.*"
    syntax: "```link-preview\nurl: https://example.com\n```"
    config_schema:
      url:
        type: string
        description: URL to preview
        required: true

# API Endpoints
# Define available API operations
endpoints:
  - id: fetch_metadata
    name: Fetch Open Graph Metadata
    method: GET
    description: Fetch Open Graph metadata for a URL
    parameters:
      - name: url
        type: string
        description: URL to fetch metadata for
        required: true
    response_schema:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        image:
          type: string
        url:
          type: string
        site_name:
          type: string

# Permissions
permissions:
  - network_request
  - render_blocks
